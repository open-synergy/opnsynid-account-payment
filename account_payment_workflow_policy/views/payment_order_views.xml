<?xml version="1.0"?>
    <!-- -*- coding: utf-8 -*-
        Copyright 2019 OpenSynergy Indonesia
        License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->
<openerp>
<data>

<record id="payment_order_form_view" model="ir.ui.view" >
    <field name="name">payment.order form</field>
    <field name="model">payment.order</field>
    <field name="inherit_id" ref="account_payment.view_payment_order_form"/>
    <field name="arch" type="xml">
        <data>
            <xpath expr="//field[@name='line_ids']" position="replace">
                <notebook>
                    <page string="Payment Details">
                        <field name="line_ids" context="{'order_id': active_id or False}" >
                            <form string="Payment Line">
                                <notebook>
                                    <page string="Payment">
                                        <group col="4">
                                            <field name="move_line_id" on_change="onchange_move_line(move_line_id,parent.mode,parent.date_prefered,parent.date_scheduled,currency,company_currency)" domain="[('reconcile_id','=', False), ('credit', '>',0), ('account_id.reconcile', '=', True),('amount_to_pay','>', 0)] "/>
                                            <separator colspan="4" string="Transaction Information"/>
                                            <field name="date"/>
                                            <label for="amount_currency" string="Amount"/>
                                            <div>
                                                <field name="amount_currency" on_change="onchange_amount(amount_currency,currency,company_currency)" class="oe_inline"/>
                                                <field name="currency" nolabel="1" class="oe_inline"/>
                                            </div>
                                            <field name="partner_id" on_change="onchange_partner(partner_id,parent.mode)"/>
                                            <field domain="[('partner_id','=',partner_id)]" name="bank_id"/>
                                            <separator colspan="2" string="Owner Account"/>
                                            <separator colspan="2" string="Destination Account"/>
                                            <field colspan="2" name="info_owner" nolabel="1"/>
                                            <field colspan="2" name="info_partner" nolabel="1"/>
                                            <field colspan="4" name="communication"/>
                                            <field colspan="4" name="communication2"/>
                                            <field name="name"/>
                                            <field name="state"/>
                                            <field name="company_id" widget="selection" groups="base.group_multi_company"/>
                                        </group>
                                    </page>
                                    <page string="Information">
                                        <group col="4" string="General Information">
                                            <label for="amount" groups="base.group_multi_currency"/>
                                            <div groups="base.group_multi_currency">
                                                <field name="amount" class="oe_inline"/>
                                                <field name="company_currency" class="oe_inline"/>
                                            </div>
                                            <separator colspan="4" string="Entry Information"/>
                                            <field name="create_date" readonly="1"/>
                                            <field name="ml_maturity_date"/>
                                            <field name="ml_inv_ref"/>
                                        </group>
                                    </page>
                                </notebook>
                            </form>
                            <tree string="Payment Line">
                                <field name="ml_inv_ref" />
                                <field name="partner_id"/>
                                <field name="communication"/>
                                <field name="bank_id" domain="[('partner_id', '=', partner_id)]"/>
                                <field name="ml_maturity_date"/>
                                <field name="date"/>
                                <field name="amount_currency" string="Amount"/>
                                <field name="currency"/>
                                <field name="name"/>
                                <field name="amount" sum="Total in Company Currency" invisible="1"/>
                            </tree>
                        </field>
                    </page>
                    <page name="policy" string="Policy" groups="base.group_system">
                        <group name="policy_1" colspan="4" col="2">
                            <field name="confirm_ok"/>
                            <field name="make_ok"/>
                            <field name="cancel_ok"/>
                            <field name="restart_ok"/>
                        </group>
                    </page>
                </notebook>
            </xpath>

            <xpath expr="//button[@name='open']" position="attributes">
                <attribute name="attrs">
                    {'invisible':['|',('state','!=', 'draft'),('confirm_ok','=',False)]}
                </attribute>
                <attribute name="states"/>
                <attribute name="groups"/>
            </xpath>

            <xpath expr="//button[@name='set_done']" position="attributes">
                <attribute name="attrs">
                    {'invisible':['|',('state','!=', 'open'),('make_ok','=',False)]}
                </attribute>
                <attribute name="states"/>
                <attribute name="groups"/>
            </xpath>

            <xpath expr="//button[@name='set_to_draft']" position="attributes">
                <attribute name="attrs">
                    {'invisible':['|',('state','!=', 'cancel'),('restart_ok','=',False)]}
                </attribute>
                <attribute name="states"/>
                <attribute name="groups"/>
            </xpath>

            <xpath expr="//button[@name='cancel']" position="attributes">
                <attribute name="attrs">
                    {'invisible':['|',('state','not in', ['draft','open']),('cancel_ok','=',False)]}
                </attribute>
                <attribute name="states"/>
                <attribute name="groups"/>
            </xpath>
        </data>

    </field>
</record>

</data>
</openerp>
